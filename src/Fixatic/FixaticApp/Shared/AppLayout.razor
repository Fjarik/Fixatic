@inherits LayoutComponentBase
@layout MainLayout

@if (_currentUser != null)
{
    <CascadingValue Value="@_currentUser" Name="CurrentUser">
        <MudAppBar Elevation="0">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
            <MudText Typo="Typo.h5" Class="ml-3">Fixatic</MudText>
            <MudSpacer />
            <MudTooltip Text="Log out">
                <MudIconButton Icon="@Icons.Filled.Logout" Color="Color.Inherit" Href="./logout" />
            </MudTooltip>
            <MudTooltip Text="@(DarkMode ? "Switch to Light Theme" : "Switch to Dark Theme")">
                <MudIconButton Icon="@(DarkMode? @Icons.Rounded.LightMode : @Icons.Material.Outlined.DarkMode)" Color="Color.Inherit" OnClick="@ToggleDarkMode" />
            </MudTooltip>
        </MudAppBar>
        <MudDrawer @bind-Open="@_drawerOpen" Elevation="1">
            <MudDrawerHeader>
                <MudText Typo="Typo.h6">Menu</MudText>
            </MudDrawerHeader>
            <NavMenu />
        </MudDrawer>
        <MudMainContent Style="height: 100vh;">
            <MudContainer MaxWidth="MaxWidth.False">
                @Body
            </MudContainer>
        </MudMainContent>
    </CascadingValue>
}